(this["webpackJsonpevents-tracker"]=this["webpackJsonpevents-tracker"]||[]).push([[0],{235:function(e,t,a){e.exports=a(413)},410:function(e,t,a){},411:function(e,t,a){},413:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(38),o=a.n(s),l=a(45),c=a(39),i=a(31),u=a(46),m=a(47),p=a(422),h=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a.Item,{onClick:this.props.onClick,className:"cursor-pointer"},r.a.createElement("span",{className:this.props.event.closed?"line-through":""},this.props.event.title))}}]),a}(r.a.Component),d=a(427),E=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e,t=this;return this.props.loading?r.a.createElement(d.a,{size:"lg",className:"mx-5 my-5"}):(null===(e=this.props.events)||void 0===e?void 0:e.length)?r.a.createElement(p.a,{bordered:!0,hover:!0,autoScroll:!0},this.props.events.map((function(e){return r.a.createElement(h,{key:e.id,event:e,onClick:function(){return t.props.selectEvent(e.id)}})}))):r.a.createElement("span",null,"No items to show.")}}]),a}(r.a.Component),v="https://natureevents.azurewebsites.net/api",f=function(){return{type:"REQUEST_DETAIL"}},b=function(e){return{type:"RECEIVE_DETAIL",payload:e}},g=function(){return{type:"REQUEST_EVENTS"}},j=function(e){return{type:"RECEIVE_EVENTS",events:e}},O=function(e){return{type:"RECEIVE_SOURCES",payload:e}},y=Object(l.b)((function(e){return{events:e.list.events,loading:e.list.loading}}),(function(e){return{selectEvent:function(t){return e(function(e){return function(t){return t(f()),fetch("".concat(v,"/naturalevents/").concat(e)).then((function(e){return e.json()})).then((function(e){t(b(e))}))}}(t))}}}))(E),S=a(25),C=a(13),w=a(428),k=a(233),N=a(420),T=a(424),I=a(419),R=a(421),D=a(425),_=[{label:"Open",value:"open"},{label:"Closed",value:"closed"}],V=[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],U=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={showControls:!1,range:[e.from,e.to],statuses:[],sources:[],sort:""},n.close=n.close.bind(Object(C.a)(n)),n.toggleDrawer=n.toggleDrawer.bind(Object(C.a)(n)),n.submit=n.submit.bind(Object(C.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.getSources()}},{key:"toggleDrawer",value:function(){this.setState({showControls:!0})}},{key:"close",value:function(){this.setState({showControls:!1})}},{key:"submit",value:function(){this.close(),this.props.updateFilters({from:this.state.range[0],to:this.state.range[1],sources:this.state.sources,statuses:this.state.statuses,sort:this.state.sort})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(w.a,{className:this.props.className},r.a.createElement(k.a,{onClick:this.toggleDrawer},"Filters"),r.a.createElement(k.a,{onClick:this.submit,appearance:"primary"},"Search")),r.a.createElement(N.a,{show:this.state.showControls,onHide:this.close},r.a.createElement(N.a.Header,null,r.a.createElement(N.a.Title,null,"Filters")),r.a.createElement(N.a.Body,null,r.a.createElement("div",{className:"field mb-4"},r.a.createElement(T.a,null,"Dates"),r.a.createElement("div",null,r.a.createElement(I.a,{className:"block",value:this.state.range,onChange:function(t){e.setState({range:t})}}))),r.a.createElement("div",{className:"field mb-4"},r.a.createElement(T.a,null,"Sources"),r.a.createElement("div",null,r.a.createElement(R.a,{data:this.props.sources.map((function(e){return{label:e.title,value:e.id}})),onChange:function(t){return e.setState({sources:t})},value:this.state.sources}))),r.a.createElement("div",{className:"field mb-4"},r.a.createElement(T.a,null,"Statuses"),r.a.createElement("div",null,r.a.createElement(R.a,{data:_,onChange:function(t){return e.setState({statuses:t})},searchable:!1,value:this.state.statuses}))),r.a.createElement("div",{className:"field mb-4"},r.a.createElement(T.a,null,"Sort"),r.a.createElement("div",null,r.a.createElement(D.a,{data:V,onChange:function(t){return e.setState({sort:t})},searchable:!1,value:this.state.sort})))),r.a.createElement(N.a.Footer,null,r.a.createElement(k.a,{onClick:this.submit,appearance:"primary"},"Search"),r.a.createElement(k.a,{onClick:this.close,appearance:"subtle"},"Cancel"))))}}]),a}(r.a.Component),A=Object(l.b)((function(e,t){return Object(S.a)({from:e.filter.from,to:e.filter.to,sources:e.meta.sources,sort:e.filter.sort},t)}),(function(e){return{updateFilters:function(t){return e((a=t,function(e){e(function(e){return{type:"UPDATE_FILTERS",payload:e}}(a)),e(g());var t=new URL("".concat(v,"/naturalevents"));return a.from&&t.searchParams.append("from",a.from.toISOString()),a.to&&t.searchParams.append("to",a.to.toISOString()),a.sources.length>0&&t.searchParams.append("source",a.sources.join(",")),a.statuses.length>0&&t.searchParams.append("status",a.statuses.join(",")),a.sort&&t.searchParams.append("sort",a.sort),fetch(t.toString()).then((function(e){return e.json()})).then((function(t){e(j(t))}))}));var a},getSources:function(){return e((function(e){return fetch("".concat("https://natureevents.azurewebsites.net/api","/sources")).then((function(e){return e.json()})).then((function(t){e(O(t))}))}))}}}))(U),F=a(426),L=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return this.props.loading?r.a.createElement(d.a,{size:"lg"}):this.props.event?r.a.createElement(F.a,{header:this.props.event.title,shaded:!0,className:this.props.className},this.props.event.description&&r.a.createElement("div",null,r.a.createElement("h2",null,"Description"),r.a.createElement("p",null,this.props.event.description)),this.props.event.closed&&r.a.createElement("p",null,"Closed on: ",this.props.event.closed)):r.a.createElement("div",null)}}]),a}(r.a.Component),P=Object(l.b)((function(e,t){return Object(S.a)({event:e.detail.event,loading:e.detail.loading},t)}))(L);a(410);var z=function(){return r.a.createElement("div",{className:"container app h-screen mx-auto"},r.a.createElement("header",null,r.a.createElement("h1",null,"Natural events")),r.a.createElement("div",{className:"list"},r.a.createElement(A,{className:"mb-2"}),r.a.createElement(y,null)),r.a.createElement("div",{className:"detail"},r.a.createElement(P,{className:"h-full w-full"})),r.a.createElement("footer",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=a(80);var x=function(e,t){switch(t.type){case"RECEIVE_EVENTS":return Object(S.a)({},e,{events:t.events,loading:!1});case"REQUEST_EVENTS":return Object(S.a)({},e,{loading:!0})}return e};var B=function(e,t){switch(t.type){case"UPDATE_FILTERS":return Object(S.a)({},e,{from:t.payload.from,to:t.payload.to})}return e};var H=function(e,t){switch(t.type){case"RECEIVE_SOURCES":return Object(S.a)({},e,{sources:t.payload})}return e};var J=function(e,t){switch(t.type){case"RECEIVE_DETAIL":return Object(S.a)({},e,{event:t.payload,loading:!1});case"REQUEST_DETAIL":return Object(S.a)({},e,{loading:!0})}return e};var W=a(232),M=(a(411),a(412),Object(Q.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:{events:[],loading:!1},filter:{sort:"",statuses:[],sources:[]},meta:{sources:[]},detail:{event:null,loading:!1}},t=arguments.length>1?arguments[1]:void 0;return{list:x(e.list,t),filter:B(e.filter,t),meta:H(e.meta,t),detail:J(e.detail,t)}}),{list:{events:[],loading:!1},filter:{sort:"",statuses:[],sources:[]},meta:{sources:[]},detail:{event:null,loading:!1}},Object(Q.a)(W.a)));o.a.render(r.a.createElement(l.a,{store:M},r.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[235,1,2]]]);
//# sourceMappingURL=main.a08c7fd9.chunk.js.map