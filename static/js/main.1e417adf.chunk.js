(this["webpackJsonpevents-tracker"]=this["webpackJsonpevents-tracker"]||[]).push([[0],{236:function(e,t,a){e.exports=a(414)},411:function(e,t,a){},412:function(e,t,a){},414:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(37),l=a.n(s),o=a(43),c=a(422),i=function(e){var t=e.event,a=e.onClick;return r.a.createElement(c.a.Item,{onClick:a,className:"cursor-pointer"},r.a.createElement("span",{className:t.closed?"line-through":""},t.title))},u=a(428),m="https://natureevents.azurewebsites.net/api",E=function(){return{type:"RECEIVE_EVENTS_FAILED"}},d=function(){return{type:"REQUEST_DETAIL"}},h=function(e){return{type:"RECEIVE_DETAIL",payload:e}},p=function(){return{type:"REQUEST_EVENTS"}},v=function(e){return{type:"RECEIVE_EVENTS",events:e}},f=function(e){return{type:"RECEIVE_SOURCES",payload:e}},b=Object(o.b)((function(e){return{events:e.list.events,loading:e.list.loading,error:e.list.error}}),(function(e){return{selectEvent:function(t){return e(function(e){return function(t){return t(d()),fetch("".concat(m,"/naturalevents/").concat(e)).then((function(e){return e.json()})).then((function(e){t(h(e))}))}}(t))}}}))((function(e){var t=e.error,a=e.loading,n=e.events,s=e.selectEvent;return t?r.a.createElement("p",null,"Failed to load events."):a?r.a.createElement(u.a,{size:"lg",className:"mx-5 my-5"}):(null===n||void 0===n?void 0:n.length)?r.a.createElement(c.a,{bordered:!0,hover:!0,autoScroll:!0},n.map((function(e){return r.a.createElement(i,{key:e.id,event:e,onClick:function(){return s(e.id)}})}))):r.a.createElement("span",null,"No items to show.")})),g=a(11),j=a(102),O=a(103),S=a(63),y=a(111),C=a(110),w=a(429),N=a(234),k=a(421),I=a(425),T=a(420),R=a(423),D=a(426),_=[{label:"Open",value:"open"},{label:"Closed",value:"closed"}],V=[{label:"Ascending",value:"asc"},{label:"Descending",value:"desc"}],F=function(e){Object(y.a)(a,e);var t=Object(C.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={showControls:!1,range:[e.from,e.to],statuses:[],sources:[],sort:""},n.close=n.close.bind(Object(S.a)(n)),n.toggleDrawer=n.toggleDrawer.bind(Object(S.a)(n)),n.submit=n.submit.bind(Object(S.a)(n)),n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){this.props.getSources()}},{key:"toggleDrawer",value:function(){this.setState({showControls:!0})}},{key:"close",value:function(){this.setState({showControls:!1})}},{key:"submit",value:function(){this.close(),this.props.updateFilters({from:this.state.range[0],to:this.state.range[1],sources:this.state.sources,statuses:this.state.statuses,sort:this.state.sort})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(w.a,{className:this.props.className},r.a.createElement(N.a,{onClick:this.toggleDrawer},"Filters"),r.a.createElement(N.a,{onClick:this.submit,appearance:"primary"},"Search")),r.a.createElement(k.a,{show:this.state.showControls,onHide:this.close},r.a.createElement(k.a.Header,null,r.a.createElement(k.a.Title,null,"Filters")),r.a.createElement(k.a.Body,null,r.a.createElement("div",{className:"field mb-4"},r.a.createElement(I.a,null,"Dates"),r.a.createElement("div",null,r.a.createElement(T.a,{className:"block",value:this.state.range,onChange:function(t){e.setState({range:t})}}))),r.a.createElement("div",{className:"field mb-4"},r.a.createElement(I.a,null,"Sources"),r.a.createElement("div",null,r.a.createElement(R.a,{data:this.props.sources.map((function(e){return{label:e.title,value:e.id}})),onChange:function(t){return e.setState({sources:t})},value:this.state.sources}))),r.a.createElement("div",{className:"field mb-4"},r.a.createElement(I.a,null,"Statuses"),r.a.createElement("div",null,r.a.createElement(R.a,{data:_,onChange:function(t){return e.setState({statuses:t})},searchable:!1,value:this.state.statuses}))),r.a.createElement("div",{className:"field mb-4"},r.a.createElement(I.a,null,"Sort"),r.a.createElement("div",null,r.a.createElement(D.a,{data:V,onChange:function(t){return e.setState({sort:t})},searchable:!1,value:this.state.sort})))),r.a.createElement(k.a.Footer,null,r.a.createElement(N.a,{onClick:this.submit,appearance:"primary"},"Search"),r.a.createElement(N.a,{onClick:this.close,appearance:"subtle"},"Cancel"))))}}]),a}(r.a.Component),A=Object(o.b)((function(e,t){return Object(g.a)({from:e.filter.from,to:e.filter.to,sources:e.meta.sources,sort:e.filter.sort},t)}),(function(e){return{updateFilters:function(t){return e((a=t,function(e){e(function(e){return{type:"UPDATE_FILTERS",payload:e}}(a)),e(p());var t=new URL("".concat(m,"/naturalevents"));return function(e,t){t.from&&e.searchParams.append("from",t.from.toISOString()),t.to&&e.searchParams.append("to",t.to.toISOString()),t.sources.length>0&&e.searchParams.append("source",t.sources.join(",")),t.statuses.length>0&&e.searchParams.append("status",t.statuses.join(",")),t.sort&&e.searchParams.append("sort",t.sort)}(t,a),fetch(t.toString()).then((function(e){return e.json()})).then((function(t){e(v(t))})).catch((function(){e(E())}))}));var a},getSources:function(){return e((function(e){return fetch("".concat("https://natureevents.azurewebsites.net/api","/sources")).then((function(e){return e.json()})).then((function(t){e(f(t))}))}))}}}))(F),L=a(427),U=function(e){Object(y.a)(a,e);var t=Object(C.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(O.a)(a,[{key:"render",value:function(){return this.props.loading?r.a.createElement(u.a,{size:"lg"}):this.props.event?r.a.createElement(L.a,{header:this.props.event.title,shaded:!0,className:this.props.className},this.props.event.description&&r.a.createElement("div",null,r.a.createElement("h2",null,"Description"),r.a.createElement("p",null,this.props.event.description)),this.props.event.closed&&r.a.createElement("p",null,"Closed on: ",this.props.event.closed)):r.a.createElement("div",null)}}]),a}(r.a.Component),P=Object(o.b)((function(e,t){return Object(g.a)({event:e.detail.event,loading:e.detail.loading},t)}))(U);a(411);var x=function(){return r.a.createElement("div",{className:"container app h-screen mx-auto"},r.a.createElement("header",null,r.a.createElement("h1",{className:"text-5xl"},"Natural events")),r.a.createElement("div",{className:"list"},r.a.createElement(A,{className:"mb-2"}),r.a.createElement(b,null)),r.a.createElement("div",{className:"detail"},r.a.createElement(P,{className:"h-full w-full"})),r.a.createElement("footer",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(77);var Q=function(e,t){switch(t.type){case"RECEIVE_EVENTS":return Object(g.a)(Object(g.a)({},e),{},{events:t.events,loading:!1});case"REQUEST_EVENTS":return Object(g.a)(Object(g.a)({},e),{},{loading:!0,error:!1});case"RECEIVE_EVENTS_FAILED":return Object(g.a)(Object(g.a)({},e),{},{loading:!1,error:!0})}return e};var B=function(e,t){switch(t.type){case"UPDATE_FILTERS":return Object(g.a)(Object(g.a)({},e),{},{from:t.payload.from,to:t.payload.to})}return e};var H=function(e,t){switch(t.type){case"RECEIVE_SOURCES":return Object(g.a)(Object(g.a)({},e),{},{sources:t.payload})}return e};var J=function(e,t){switch(t.type){case"RECEIVE_DETAIL":return Object(g.a)(Object(g.a)({},e),{},{event:t.payload,loading:!1});case"REQUEST_DETAIL":return Object(g.a)(Object(g.a)({},e),{},{loading:!0})}return e};var W=a(233),M=(a(412),a(413),Object(z.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:{events:[],loading:!1,error:!1},filter:{sort:"",statuses:[],sources:[]},meta:{sources:[]},detail:{event:null,loading:!1}},t=arguments.length>1?arguments[1]:void 0;return{list:Q(e.list,t),filter:B(e.filter,t),meta:H(e.meta,t),detail:J(e.detail,t)}}),{list:{events:[],loading:!1,error:!1},filter:{sort:"",statuses:[],sources:[]},meta:{sources:[]},detail:{event:null,loading:!1}},Object(z.a)(W.a)));l.a.render(r.a.createElement(o.a,{store:M},r.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[236,1,2]]]);
//# sourceMappingURL=main.1e417adf.chunk.js.map